<!-- index.wxml -->
<wxs module="filter" src="../../utils/tools.wxs"></wxs>
<view class="banner">
  <swiper autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" circular="{{circular}}"
    current="{{currentSwiper}}" indicator-dots>
    <block wx:for="{{proInfo.banner}}" wx:for-index="index">
      <swiper-item>
        <image src="{{item}}" class="slide-image" mode="aspectFill" />
      </swiper-item>
    </block>
  </swiper>
</view>
<view class="proInfo">
  <view class="price flex">
    <view>￥<text>{{proInfo.price}}</text></view>
    <view class="tag">最快次日达</view>
  </view>
  <view class="tit">{{proInfo.name}} <text wx:if="{{proInfo.free_delivery}}">免邮</text></view>
  <view class="desc">{{proInfo.selling_point}}</view>
  <view class="tags flex"><text wx:for="{{proInfo.tags}}">{{item}}</text></view>
</view>

<view class="content">
  <view class="tips flex">
    <view class="tit">温馨提示</view>
    <view class="txt flex-1">
      <view><text>◉</text>若不及时食用，请放置0-10摄氏度冷藏</view>
      <!-- <view><text>◉</text>若作为TOP1的升级版，所有的用心都藏在内
  馅里，一口咬下去的满足只有尝过才知道。</view> -->
    </view>
  </view>
  <view class="detail" wx:if="{{proInfo.detail}}">
    <view class="tit"><text>商品详情</text></view>
    <view class="flex">
      <view class="flex-1">
        <image lazy-load src="{{proInfo.detail}}" mode="widthFix" ></image>
      </view>
    </view>
  </view>
</view>
<view id="bottom_menu" class="option flex" style="padding-bottom:{{btmHolder}}px;display:{{!is_show?'none':'flex'}}">
  <view class="flex">
    <navigator class="home" open-type="switchTab" url="/pages/index/index">
      <view class="iconfont icon-home"></view>
      <text>首页</text>
    </navigator>
    <navigator class="cart" bind:tap="toCart" open-type="switchTab" url="/pages/chart/chart">
      <block wx:if="{{totalNum>0}}">
        <view class="num" wx:if="{{totalNum<100}}">{{totalNum}}</view>
        <view class="num num99" wx:else>99+</view>
      </block>

      <view class="iconfont icon-chart"></view>
      <text>购物车</text>
    </navigator>
  </view>

  <view class="flex">
    <view wx:if="{{proInfo.stock_number == 0}}" class="btn add-btn" style="color:#C9C9C9;background:#F5F5F5;width:250px;margin-right: 15px;box-shadow: none;">已售罄</view>

    <view wx:if="{{proInfo.stock_number != 0}}" class="btn add-btn" data-action="0" bind:tap="showPop"
      data-pop="bread-panel">加入购物车</view>
    <view wx:if="{{proInfo.stock_number != 0}}" class="btn buy-btn" data-action="1" bind:tap="showPop"
      data-pop="bread-panel">立即购买</view>
  </view>


</view>

<view class="pop-panel score-panel {{pop=='bread-panel'?'upPanel':''}}" style="padding-bottom:{{btmHolder}}px">
  <view class="icon-close close" bind:tap="close"></view>
  <view class="pop-con">
    <view class="info flex">
      <view class="pic">
        <image src="{{proInfo.image}}" mode="scaleToFill"></image>
      </view>
      <view class="h3 flex">
        <view class="tit">{{proInfo.name}}</view>
        <view class="price"><text>￥</text>{{proInfo.price}}</view>
      </view>
    </view>
    <view class="h4 flex">
      <text>购买数量</text>
      <view class="set-chart flex">
        <text class="iconfont icon-minus" bind:tap="minusFitting" data-type="2" data-idx="{{index}}"></text>
        <text class="count">{{skuNum}}</text>
        <text class="iconfont icon-plus" bind:tap="addFitting" data-type="2" data-idx="{{index}}"></text>
      </view>
    </view>
    <view class="confirm-btn btn" bind:tap="confirmBread" data-id="{{proInfo.id}}">确定</view>
  </view>

</view>
<view class="mask" wx:if="{{pop!=0}}" bind:tap="close"></view>
<view style="height:{{60+btmHolder}}px"></view>