<!-- pages/user/user.wxml -->
<view class="menu flex">
  <view bind:tap="switchTab" class="{{currentTab==0 ? 'on' : ''}}" data-tabid="0">
    <view>全部</view>
    <text></text>
  </view>
  <view bind:tap="switchTab" class="{{currentTab==1 ? 'on' : ''}}" data-tabid="1">
    <view>待付款</view>
    <text></text>
  </view>
  <view bind:tap="switchTab" class="{{currentTab==2 ? 'on' : ''}}" data-tabid="2">
    <view>待收货</view>
    <text></text>
  </view>
  <view bind:tap="switchTab" class="{{currentTab==3 ? 'on' : ''}}" data-tabid="3">
    <view>已完成</view>
    <text></text>
  </view>
  <view bind:tap="switchTab" class="{{currentTab==4 ? 'on' : ''}}" data-tabid="4">
    <view>已取消</view>
    <text></text>
  </view>
</view>
<view class="card" wx:if="{{count!=0}}">
  <block wx:for="{{orderList}}">
    <view class="item" wx:for="{{item}}" wx:for-item="order">
      <view class="flex hd">
        <view class="order-info">
          <view class="order-code">订单编号:{{order.order_code}}</view>
          <view class="date">{{order.create_time}}</view>
        </view>
        <view class="status">{{order.status_text}}</view>
      </view>
      <view class="pic-box flex">
        <view class="pic">
          <image src="{{pic.image_url}}" wx:for="{{order.detail}}" wx:for-item="pic" mode="aspectFill"></image>
        </view>
        <view class="count">共{{order.count}}件 <text class="iconfont icon-arrow-r"></text></view>
      </view>
      <view class="total">合计：￥<text>{{order.order_price}}</text></view>
      <view class="option flex">
        
        <block wx:if="{{order.status_text=='未支付'}}">
          <!-- <view class="time">支付时间剩余</view> -->
          <view class="btn btn1 cancel-btn" bind:tap="cancelOrder" data-code="{{order.order_code}}">取消订单</view>
          <view class="btn pay-btn" bind:tap="payOrder" data-code="{{order.order_code}}">立即支付</view>
        </block>
        <block wx:if="{{order.status_text=='已支付'}}">
          <view class="btn btn1 delivery-btn" data-code="{{order.order_code}}">查看物流</view>
          <view class="btn pay-btn" data-code="{{order.order_code}}">再来一单</view>
        </block>
        <block wx:if="{{order.status_text=='已完成'}}">
          <view class="btn btn1 delivery-btn" data-code="{{order.order_code}}">再来一单</view>
          <view class="btn pay-btn" data-code="{{order.order_code}}">去评价</view>
        </block>
        <block wx:if="{{order.status_text=='超时取消'}}">
          <view class="btn pay-btn" data-code="{{order.order_code}}">再来一单</view>
        </block>
      </view>
    </view>
  </block>
  
  <view wx:if="{{noMoreData}}" class="more-btn">我可是有底线的</view>
</view>
<block wx:else>
  <view class="nodata">
    <image src="../../image/no-data.png"></image>
    <view>暂无数据</view>
  </view>
</block>


